<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Modulo3</title>
    </h:head>
    <h:body style="background-color: #ccffcc; font: bold 11pt italic">
        <h:form prependId="false">
            <h:messages id="messaes" 
                        errorStyle="color: red; font-size: 12pt;"
                        infoStyle="color: blue; font-size: 12pt;"/>
            <div align="center" >
                <h:panelGrid border="1" bgcolor="white" style="border: black">
                    <f:facet name="header">
                        <h:outputLabel value="#{pessoaBean.tituloPanel}" style="font-size: 18pt "/>
                    </f:facet>

                    <h:panelGrid columns="2">

                        <h:outputLabel value="Nome:"/>
                        <h:inputText id="nome" value="#{pessoaBean.pessoa.nome}" 
                                     onkeyup="
                                             nomeComp.value = this.value + ' ' + sobreNome.value;
                                     "/>
                        <h:outputLabel value="Sobrenome:"/>
                        <h:inputText id="sobreNome" value="#{pessoaBean.pessoa.sobrenome}" 
                                     onkeyup="
                                             nomeComp.value = nome.value + ' ' + this.value;
                                     "/>
                        <h:outputLabel value="Nome comp"/>
                        <h:inputText id="nomeComp" value="#{pessoaBean.pessoa.nomeCompleto}" autocomplete="on" 
                                     onkeyup="this.value = nome.value + ' ' + sobreNome.value"/>
                        <h:outputLabel value="Data Nascimento:"/>
                        <h:inputText value="#{pessoaBean.pessoa.dataNascimento}">
                            <f:convertDateTime type="date" pattern="dd/MM/yyyy" timeZone="GMT-3"/>
                        </h:inputText>
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <h:commandButton id="butao" value="Salvar" action="#{pessoaBean.salvar()}" 
                                         style="margin-left: 100px; "
                                         onclick="return confirm('Deseja realmente salvar?');"/>
                        <h:commandButton value="Cancelar" action="#{pessoaBean.cancelar()}" 
                                         style="margin-left: 10px" />                    
                    </h:panelGrid>
                </h:panelGrid>
            </div>
            <div align="center" >
                <h:dataTable value="#{pessoaBean.pessoas}" var="pessoa" width="80%" 
                             border="1" bgcolor="white" style="margin-top: 30px ">
                    <f:facet name="header"><h:outputLabel value="Dados pessoais" style="font-size: 18pt "/></f:facet>

                    <h:column>
                        <f:facet name="header">NOME</f:facet>
                        <h:outputText value="#{pessoa.nome}" style="text-align: center"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">SOBRENOME</f:facet>
                        <h:outputText value="#{pessoa.sobrenome}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">NOME COMPLETO</f:facet>
                        <h:outputText value="#{pessoa.nomeCompleto}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">DATA NASCIMENTO</f:facet>
                        <h:outputText value="#{pessoa.dataNascimento}">
                            <f:convertDateTime type="date" pattern="dd/MM/yyyy" timeZone="GMT-3"/>
                        </h:outputText>
                    </h:column>
                    <h:column>
                        <f:facet name="header">IDADE</f:facet>
                        <h:outputText value="#{pessoa.idade}"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header" >AÇÕES</f:facet>
                        <h:commandButton value="Excluir" action="#{pessoaBean.excluir(pessoa.id)}" 
                                         onclick="return confirm('Confirma exclusão?')"/>
                        <h:commandButton value="Editar" action="#{pessoaBean.editar(pessoa.id)}" 
                                         style="margin-left: 15px"/>
                    </h:column>
                </h:dataTable>   
            </div>
        </h:form>
    </h:body>
</html>

